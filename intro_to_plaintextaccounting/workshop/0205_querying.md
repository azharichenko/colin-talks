# Querying Your Transactions

## Querying Accounts {#sec:querying_accounts}

A bare balance or register report is great for seeing all data. However, it's
more realistic to limit output in some way in order to see transactions related to other
transations or accounts related to others in some way. `ledger` has a very
powerful query language, the key tenets of which you'll learn in these next few
sections

Perhaps you want to only see your assets on hand. Run a balance report and
specify `Assets` with `ledger -f ex.ledger balance Assets` to see only Assets.
@Lst:examples_assets shows the output.

Listing: Assets-only report on @lst:examples {#lst:examples_assets}
```{pipe="sh"}
ledger -f ex.ledger balance Assets
```

Try some other accounts present in `ex.ledger` to see the balance for top-level accounts
as well as subaccounts.

If you're not sure what accounts are available to be queried, `ledger` can
help.
To see the accounts present in a transaction log,
use the `accounts` commmand in place of `balance` or
`register`. You will see something like @lst:example_accounts.

Listing: `ledger -f ex.ledger accounts` output {#lst:example_accounts}
```{pipe="sh"}
ledger -f ex.ledger accounts
```

## Important Balance Report Types

In the introductory talk you watched as a part of @sec:intro_talk, you learned
about two important report types:
_Cashflow_ (also called _Profit and Loss_) and _Net Worth_.

### Cashflow

Cashflow tracks Income and Expenses: money that came in from outside of your
control and money that exited your control. Subtract Expenses from Income and
you will know if you had a _gain_ and turned a _profit_ or experienced a _loss_.

`ledger` makes a cashflow report incredible easy. The query is simply `Income
Expenses`! Try it out on `ex.ledger`. See @lst:example_cashflow for the
expected output of `ledger -f ex.ledger bal Income Expenses`.

Listing: A cashflow report generated by `ledger -f ex.ledger bal Income Expenses` {#lst:example_cashflow}

```{pipe="sh"}
ledger -f ex.ledger bal Income Expenses
```

### Net Worth

Net Worth tracks Assets and Liabilities: money that you control and money owed to someone else.
Subtract Liabilities from Assets and you will ascertain your current net worth.
It's OK if this number is negative: it just means that you owe more than you currently have.
When tracking your net work for real, don't forget to track real property, like a house or a car.
A house is an asset that has a corresponding liability that goes away over time: a mortgage!
You'll see how to track house value, mortgage, and associated expenses in @sec:commodity_home.

Like the cashflow report, ascertaining net worth is very easy in `ledger`.
The query is simply `Assets Liabilities`.
See @lst:example_networth for the expected output of `ledger -f ex.ledger bal Assets Liabilities`.

Listing: A net worth report generated by `ledger -f ex.ledger bal Assets Liabilities`. {#lst:example_networth}

```{pipe="sh"}
ledger -f ex.ledger bal Assets Liabilities
```

## Querying Payees {#sec:querying_payees}

When you want to

## Querying tagged transactions {#sec:querying_tagged_transactions}

Tagged transactions are a powerful way to set simple key-value pairs of
metadata associated with a transaction. For example, you could track the
contact information of payees or maybe a warranty expiration date for something
you purchased.

Listing: A transaction with a tag comment {#lst:tagged_tx}

```{.ledger pipe="ledger -f - print | tee tx_tags.ledger"}
2020-06-29 Costco
  ; warranty_expiration: 2023-06-29
  Expenses:Electronics:Computer   1,200.00 USD
  Expenses:Groceries                200.00 USD
  Liabilities:CreditCard:Visa

2020-07-01 Costco
  Expenses:Groceries      100.00 USD
  Liabilities:CreditCard:Visa

````

Using the `register` and `print` commands, we can see just the transactions
that have a tag (@lst:warranty_tag) or match based on tag value
(@lst:warranty_tag_value).

Listing: A `register` of transactions that have the `warranty_expiration` tag with
`ledger -f tx_tags.ledger reg tag warranty_expiration` {#lst:warranty_tag}

```{pipe="sh"}
ledger -f tx_tags.ledger reg tag warranty_expiration
```

Listing: A `print` of transactions that have the `warranty_expiration` tag with
`ledger -f tx_tags.ledger print tag warranty_expiration=2023-06-29` {#lst:warranty_tag_value}

```{pipe="sh"}
ledger -f tx_tags.ledger print tag warranty_expiration=2023-06-29
```


## Focusing Queries in Other Ways {#sec:advanced_queries}
